import face_recognition
import numpy as np
import os

dataset_path = "dataset/face_samples"  # Folder containing face images
encodings = []
names = []

# Process each image in the dataset
for filename in os.listdir(dataset_path):
    img_path = os.path.join(dataset_path, filename)
    img = face_recognition.load_image_file(img_path)
    face_encoding = face_recognition.face_encodings(img)

    if face_encoding:  # If a face is detected, save encoding
        encodings.append(face_encoding[0])
        names.append(filename.split(".")[0])  # Extract name from filename

# Save face encodings and names
np.save("models/face_encodings.npy", np.array(encodings))
np.save("models/face_names.npy", np.array(names))

print(f"âœ… Saved {len(encodings)} face encodings!")
